services:
  - type: web
    name: writgo
    env: node
    region: frankfurt
    plan: free
    buildCommand: yarn install && yarn build
    startCommand: yarn start
    envVars:
      - key: NODE_VERSION
        value: 22.16.0
      - key: NEXT_PUBLIC_SUPABASE_URL
        sync: false
      - key: NEXT_PUBLIC_SUPABASE_ANON_KEY
        sync: false
      - key: SUPABASE_SERVICE_ROLE_KEY
        sync: false
      - key: AIML_API_KEY
        sync: false
      - key: NEXT_PUBLIC_SITE_URL
        value: https://writgo.nl

  # Cron job for WritGo AutoPilot
  - type: cron
    name: writgo-autopilot
    env: node
    region: frankfurt
    schedule: "0 */6 * * *"  # Every 6 hours
    buildCommand: echo "Cron job - no build needed"
    startCommand: curl -X POST https://writgo.nl/api/cron/autopilot
    envVars:
      - key: NODE_VERSION
        value: 22.16.0
