
// Nieuwe simpele database schema voor dagelijkse content automatisering

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Admin users die de app beheren
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  role      String   @default("admin")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Klanten die content automatisering willen
model Client {
  id                    String              @id @default(cuid())
  email                 String              @unique
  name                  String
  companyName           String?
  website               String?
  password              String
  
  // Automation settings
  automationActive      Boolean             @default(false)
  automationStartDate   DateTime?
  targetAudience        String?
  brandVoice            String?
  keywords              String[]
  
  // WordPress credentials voor publicatie
  wordpressUrl          String?
  wordpressUsername     String?
  wordpressPassword     String?
  
  // YouTube credentials
  youtubeChannelId      String?
  youtubeApiKey         String?
  
  // TikTok credentials  
  tiktokAccessToken     String?
  
  // Social media accounts
  facebookPageId        String?
  instagramAccountId    String?
  linkedinPageId        String?
  
  createdAt             DateTime            @default(now())
  updatedAt             DateTime            @updatedAt
  
  // Relaties
  contentPieces         ContentPiece[]
}

// Gegenereerde content (blog, social, video)
model ContentPiece {
  id                String      @id @default(cuid())
  clientId          String
  client            Client      @relation(fields: [clientId], references: [id], onDelete: Cascade)
  
  // Content details
  theme             String      // Hoofdthema van de dag
  blogTitle         String?
  blogContent       String?     @db.Text
  blogPublished     Boolean     @default(false)
  blogUrl           String?
  
  socialCaption     String?     @db.Text
  socialPublished   Boolean     @default(false)
  socialImageUrl    String?
  
  tiktokScript      String?     @db.Text
  tiktokPublished   Boolean     @default(false)
  tiktokUrl         String?
  
  youtubeScript     String?     @db.Text
  youtubeTitle      String?
  youtubePublished  Boolean     @default(false)
  youtubeUrl        String?
  
  scheduledFor      DateTime
  generatedAt       DateTime    @default(now())
  
  status            String      @default("pending") // pending, generating, published, failed
  error             String?     @db.Text
  
  createdAt         DateTime    @default(now())
  updatedAt         DateTime    @updatedAt
  
  @@index([clientId])
  @@index([scheduledFor])
  @@index([status])
}
